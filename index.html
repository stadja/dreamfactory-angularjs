<!doctype html>
<html ng-app='Blog'>
<head>
    <!-- <script src="lib/require.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-rc.0/angular.js"></script>
    <script src='lib/markdown.js' type='text/javascript'></script>
    <script src='app.js' type='text/javascript'></script>
    <script src='controllers/StoreController.js' type='text/javascript'></script>
    <script src='filters/Filters.js' type='text/javascript'></script>
    <script src='services/DreamFactoryBeta.js' type='text/javascript'></script>
    <script src='models/Abstract.js' type='text/javascript'></script>
    <script src='models/Posts.js' type='text/javascript'></script>
    <script src='models/Users.js' type='text/javascript'></script>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="ressources/style.css">
</head>
<body ng-controller="StoreController as store">
    <h1>
        <a ng-click="store.changeRecordManager('Posts')">Les Posts</a>
        <img src="ressources/ajax-loader.gif" class="loader" ng-class="{on:store.loading, off:!store.loading}"/>
    </h1>
    <div>
        <form name='limitForm' class='form-inline'>
            <span ng-show='store.records'>
                <input type="number" min="0" size="3" ng-model="store.offset" ng-change='limitForm.$valid' value="{{store.offset}}"/> / {{(store.records | filter:search).length - 1}}
                <button class="btn" ng-click='store.prev()' ng-disabled='!store.offset'>
                    <i class='glyphicon glyphicon-chevron-left'></i>
                </button>
                <button class="btn" ng-click='store.next()' ng-disabled='(store.records | filter:search).length <= (store.offset + store.limit)'>
                    <i class='glyphicon glyphicon-chevron-right'></i>
                </button>
                {{Math.floor(store.offset/store.limit) + 1}}/{{Math.floor((store.records | filter:search).length/store.limit) + 1}} :
                <input type="number" min="1" size="3" ng-model="store.limit" ng-change='limitForm.$valid' value="{{store.limit}}"/>
            </span>
        </form>
        <input ng-model='search' placeholder='filter...'/>
    <span>
        <ul class='list-group'>
            <li class="list-group-item" ng-repeat='record in store.records | filter:search | offsetTo:store.offset | limitTo:store.limit' record-display></li>
        </ul>
    </div>
</body>
</html>